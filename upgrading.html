<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Upgrading &mdash; Cassandra Driver 2.0.0b1 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.0.0b1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Cassandra Driver 2.0.0b1 documentation" href="index.html" />
    <link rel="next" title="Performance Notes" href="performance.html" />
    <link rel="prev" title="Getting Started" href="getting_started.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="performance.html" title="Performance Notes"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="getting_started.html" title="Getting Started"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Cassandra Driver 2.0.0b1 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Upgrading</a><ul>
<li><a class="reference internal" href="#upgrading-to-2-0-from-1-x">Upgrading to 2.0 from 1.x</a><ul>
<li><a class="reference internal" href="#using-the-v2-native-protocol">Using the v2 Native Protocol</a></li>
<li><a class="reference internal" href="#automatic-query-paging">Automatic Query Paging</a></li>
<li><a class="reference internal" href="#protocol-level-batch-statements">Protocol-Level Batch Statements</a></li>
<li><a class="reference internal" href="#sasl-based-authentication">SASL-based Authentication</a></li>
<li><a class="reference internal" href="#lightweight-transactions">Lightweight Transactions</a></li>
<li><a class="reference internal" href="#deprecations">Deprecations</a></li>
<li><a class="reference internal" href="#dependency-changes">Dependency Changes</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="getting_started.html"
                        title="previous chapter">Getting Started</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="performance.html"
                        title="next chapter">Performance Notes</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/upgrading.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="upgrading">
<h1>Upgrading<a class="headerlink" href="#upgrading" title="Permalink to this headline">¶</a></h1>
<div class="section" id="upgrading-to-2-0-from-1-x">
<h2>Upgrading to 2.0 from 1.x<a class="headerlink" href="#upgrading-to-2-0-from-1-x" title="Permalink to this headline">¶</a></h2>
<p>Version 2.0 of the DataStax python driver for Apache Cassandra
includes some notable improvements over version 1.x.  This version
of the driver supports Cassandra 1.2, 2.0, and 2.1.  However, not
all features may be used with Cassandra 1.2, and some new features
in 2.1 are not yet supported.</p>
<div class="section" id="using-the-v2-native-protocol">
<h3>Using the v2 Native Protocol<a class="headerlink" href="#using-the-v2-native-protocol" title="Permalink to this headline">¶</a></h3>
<p>By default, the driver will attempt to use version 2 of Cassandra&#8217;s
native protocol.  When working with Cassandra 1.2, you will need to
explicitly set the <a class="reference internal" href="api/cassandra/cluster.html#cassandra.cluster.Cluster.protocol_version" title="cassandra.cluster.Cluster.protocol_version"><tt class="xref py py-attr docutils literal"><span class="pre">protocol_version</span></tt></a> to 1:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">cassandra.cluster</span> <span class="kn">import</span> <span class="n">Cluster</span>

<span class="n">cluster</span> <span class="o">=</span> <span class="n">Cluster</span><span class="p">(</span><span class="n">protocol_version</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="automatic-query-paging">
<h3>Automatic Query Paging<a class="headerlink" href="#automatic-query-paging" title="Permalink to this headline">¶</a></h3>
<p>Version 2 of the native protocol adds support for automatic query
paging, which can make dealing with large result sets much simpler.</p>
<p>See <a class="reference internal" href="query_paging.html#query-paging"><em>Paging Large Queries</em></a> for full details.</p>
</div>
<div class="section" id="protocol-level-batch-statements">
<h3>Protocol-Level Batch Statements<a class="headerlink" href="#protocol-level-batch-statements" title="Permalink to this headline">¶</a></h3>
<p>With version 1 of the native protocol, batching of statements required
using a <a class="reference external" href="http://cassandra.apache.org/doc/cql3/CQL.html#batchStmt">BATCH cql query</a>.
With version 2 of the native protocol, you can now batch statements at
the protocol level. This allows you to use many different prepared
statements within a single batch.</p>
<p>See <a class="reference internal" href="api/cassandra/query.html#cassandra.query.BatchStatement" title="cassandra.query.BatchStatement"><tt class="xref py py-class docutils literal"><span class="pre">BatchStatement</span></tt></a> for details and usage examples.</p>
</div>
<div class="section" id="sasl-based-authentication">
<h3>SASL-based Authentication<a class="headerlink" href="#sasl-based-authentication" title="Permalink to this headline">¶</a></h3>
<p>Also new in version 2 of the native protocol is SASL-based authentication.
See the section on <a class="reference internal" href="security.html#security"><em>Security</em></a> for details and examples.</p>
</div>
<div class="section" id="lightweight-transactions">
<h3>Lightweight Transactions<a class="headerlink" href="#lightweight-transactions" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://www.datastax.com/dev/blog/lightweight-transactions-in-cassandra-2-0">Lightweight transactions</a> are another new feature.  To use lightweight transactions, add <tt class="docutils literal"><span class="pre">IF</span></tt> clauses
to your CQL queries and set the <a class="reference internal" href="api/cassandra/query.html#cassandra.query.Statement.serial_consistency_level" title="cassandra.query.Statement.serial_consistency_level"><tt class="xref py py-attr docutils literal"><span class="pre">serial_consistency_level</span></tt></a>
on your statements.</p>
</div>
<div class="section" id="deprecations">
<h3>Deprecations<a class="headerlink" href="#deprecations" title="Permalink to this headline">¶</a></h3>
<p>The following functions have moved from <tt class="docutils literal"><span class="pre">cassandra.decoder</span></tt> to <tt class="docutils literal"><span class="pre">cassandra.query</span></tt>.
The original functions have been left in place with a <tt class="xref py py-exc docutils literal"><span class="pre">DeprecationWarning</span></tt> for
now:</p>
<ul class="simple">
<li><a class="reference internal" href="api/cassandra/decoder.html#cassandra.decoder.tuple_factory" title="cassandra.decoder.tuple_factory"><tt class="xref py py-attr docutils literal"><span class="pre">cassandra.decoder.tuple_factory</span></tt></a> has moved to
<a class="reference internal" href="api/cassandra/query.html#cassandra.query.tuple_factory" title="cassandra.query.tuple_factory"><tt class="xref py py-attr docutils literal"><span class="pre">cassandra.query.tuple_factory</span></tt></a></li>
<li><a class="reference internal" href="api/cassandra/decoder.html#cassandra.decoder.named_tuple_factory" title="cassandra.decoder.named_tuple_factory"><tt class="xref py py-attr docutils literal"><span class="pre">cassandra.decoder.named_tuple_factory</span></tt></a> has moved to
<a class="reference internal" href="api/cassandra/query.html#cassandra.query.named_tuple_factory" title="cassandra.query.named_tuple_factory"><tt class="xref py py-attr docutils literal"><span class="pre">cassandra.query.named_tuple_factory</span></tt></a></li>
<li><a class="reference internal" href="api/cassandra/decoder.html#cassandra.decoder.dict_factory" title="cassandra.decoder.dict_factory"><tt class="xref py py-attr docutils literal"><span class="pre">cassandra.decoder.dict_factory</span></tt></a> has moved to
<a class="reference internal" href="api/cassandra/query.html#cassandra.query.dict_factory" title="cassandra.query.dict_factory"><tt class="xref py py-attr docutils literal"><span class="pre">cassandra.query.dict_factory</span></tt></a></li>
<li><a class="reference internal" href="api/cassandra/decoder.html#cassandra.decoder.ordered_dict_factory" title="cassandra.decoder.ordered_dict_factory"><tt class="xref py py-attr docutils literal"><span class="pre">cassandra.decoder.ordered_dict_factory</span></tt></a> has moved to
<a class="reference internal" href="api/cassandra/query.html#cassandra.query.ordered_dict_factory" title="cassandra.query.ordered_dict_factory"><tt class="xref py py-attr docutils literal"><span class="pre">cassandra.query.ordered_dict_factory</span></tt></a></li>
</ul>
</div>
<div class="section" id="dependency-changes">
<h3>Dependency Changes<a class="headerlink" href="#dependency-changes" title="Permalink to this headline">¶</a></h3>
<p>The following dependencies have officially been made optional:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">scales</span></tt></li>
<li><tt class="docutils literal"><span class="pre">blist</span></tt></li>
</ul>
<p>And one new dependency has been added (to enable Python 3 support):</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">six</span></tt></li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="performance.html" title="Performance Notes"
             >next</a> |</li>
        <li class="right" >
          <a href="getting_started.html" title="Getting Started"
             >previous</a> |</li>
        <li><a href="index.html">Cassandra Driver 2.0.0b1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, DataStax.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
    </div>
  </body>
</html>