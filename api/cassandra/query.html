<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>cassandra.query - Prepared Statements, Batch Statements, Tracing, and Row Factories &mdash; Cassandra Driver 2.7.2 documentation</title>
    
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.7.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="Cassandra Driver 2.7.2 documentation" href="../../index.html" />
    <link rel="up" title="API Documentation" href="../index.html" />
    <link rel="next" title="cassandra.pool - Hosts and Connection Pools" href="pool.html" />
    <link rel="prev" title="cassandra.metrics - Performance Metrics" href="metrics.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pool.html" title="cassandra.pool - Hosts and Connection Pools"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="metrics.html" title="cassandra.metrics - Performance Metrics"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Cassandra Driver 2.7.2 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">API Documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="metrics.html"
                        title="previous chapter"><code class="docutils literal"><span class="pre">cassandra.metrics</span></code> - Performance Metrics</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="pool.html"
                        title="next chapter"><code class="docutils literal"><span class="pre">cassandra.pool</span></code> - Hosts and Connection Pools</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/api/cassandra/query.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-cassandra.query">
<span id="cassandra-query-prepared-statements-batch-statements-tracing-and-row-factories"></span><h1><code class="docutils literal"><span class="pre">cassandra.query</span></code> - Prepared Statements, Batch Statements, Tracing, and Row Factories<a class="headerlink" href="#module-cassandra.query" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="cassandra.query.tuple_factory">
<code class="descclassname">cassandra.query.</code><code class="descname">tuple_factory</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cassandra.query.tuple_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns each row as a tuple</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">cassandra.query</span> <span class="kn">import</span> <span class="n">tuple_factory</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">session</span> <span class="o">=</span> <span class="n">cluster</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;mykeyspace&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">session</span><span class="o">.</span><span class="n">row_factory</span> <span class="o">=</span> <span class="n">tuple_factory</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rows</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;SELECT name, age FROM users LIMIT 1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">(&#39;Bob&#39;, 42)</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.0.0: </span>moved from <code class="docutils literal"><span class="pre">cassandra.decoder</span></code> to <code class="docutils literal"><span class="pre">cassandra.query</span></code></p>
</div>
</dd></dl>

<dl class="function">
<dt id="cassandra.query.named_tuple_factory">
<code class="descclassname">cassandra.query.</code><code class="descname">named_tuple_factory</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cassandra.query.named_tuple_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns each row as a <a class="reference external" href="https://docs.python.org/2/library/collections.html#collections.namedtuple">namedtuple</a>.
This is the default row factory.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">cassandra.query</span> <span class="kn">import</span> <span class="n">named_tuple_factory</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">session</span> <span class="o">=</span> <span class="n">cluster</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;mykeyspace&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">session</span><span class="o">.</span><span class="n">row_factory</span> <span class="o">=</span> <span class="n">named_tuple_factory</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rows</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;SELECT name, age FROM users LIMIT 1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">user</span> <span class="o">=</span> <span class="n">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># you can access field by their name:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s">&quot;name: </span><span class="si">%s</span><span class="s">, age: </span><span class="si">%d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">user</span><span class="o">.</span><span class="n">age</span><span class="p">)</span>
<span class="go">name: Bob, age: 42</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># or you can access fields by their position (like a tuple)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">name</span><span class="p">,</span> <span class="n">age</span> <span class="o">=</span> <span class="n">user</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s">&quot;name: </span><span class="si">%s</span><span class="s">, age: </span><span class="si">%d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">)</span>
<span class="go">name: Bob, age: 42</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">name</span> <span class="o">=</span> <span class="n">user</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">age</span> <span class="o">=</span> <span class="n">user</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s">&quot;name: </span><span class="si">%s</span><span class="s">, age: </span><span class="si">%d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">)</span>
<span class="go">name: Bob, age: 42</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.0.0: </span>moved from <code class="docutils literal"><span class="pre">cassandra.decoder</span></code> to <code class="docutils literal"><span class="pre">cassandra.query</span></code></p>
</div>
</dd></dl>

<dl class="function">
<dt id="cassandra.query.dict_factory">
<code class="descclassname">cassandra.query.</code><code class="descname">dict_factory</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cassandra.query.dict_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns each row as a dict.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">cassandra.query</span> <span class="kn">import</span> <span class="n">dict_factory</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">session</span> <span class="o">=</span> <span class="n">cluster</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;mykeyspace&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">session</span><span class="o">.</span><span class="n">row_factory</span> <span class="o">=</span> <span class="n">dict_factory</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rows</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;SELECT name, age FROM users LIMIT 1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">{u&#39;age&#39;: 42, u&#39;name&#39;: u&#39;Bob&#39;}</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.0.0: </span>moved from <code class="docutils literal"><span class="pre">cassandra.decoder</span></code> to <code class="docutils literal"><span class="pre">cassandra.query</span></code></p>
</div>
</dd></dl>

<dl class="function">
<dt id="cassandra.query.ordered_dict_factory">
<code class="descclassname">cassandra.query.</code><code class="descname">ordered_dict_factory</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cassandra.query.ordered_dict_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#cassandra.query.dict_factory" title="cassandra.query.dict_factory"><code class="xref py py-meth docutils literal"><span class="pre">dict_factory()</span></code></a>, but returns each row as an OrderedDict,
so the order of the columns is preserved.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.0.0: </span>moved from <code class="docutils literal"><span class="pre">cassandra.decoder</span></code> to <code class="docutils literal"><span class="pre">cassandra.query</span></code></p>
</div>
</dd></dl>

<dl class="class">
<dt id="cassandra.query.Statement">
<em class="property">class </em><code class="descclassname">cassandra.query.</code><code class="descname">Statement</code><a class="headerlink" href="#cassandra.query.Statement" title="Permalink to this definition">¶</a></dt>
<dd><p>An abstract class representing a single query. There are three subclasses:
<a class="reference internal" href="#cassandra.query.SimpleStatement" title="cassandra.query.SimpleStatement"><code class="xref py py-class docutils literal"><span class="pre">SimpleStatement</span></code></a>, <a class="reference internal" href="#cassandra.query.BoundStatement" title="cassandra.query.BoundStatement"><code class="xref py py-class docutils literal"><span class="pre">BoundStatement</span></code></a>, and <a class="reference internal" href="#cassandra.query.BatchStatement" title="cassandra.query.BatchStatement"><code class="xref py py-class docutils literal"><span class="pre">BatchStatement</span></code></a>.
These can be passed to <a class="reference internal" href="cluster.html#cassandra.cluster.Session.execute" title="cassandra.cluster.Session.execute"><code class="xref py py-meth docutils literal"><span class="pre">Session.execute()</span></code></a>.</p>
<dl class="attribute">
<dt id="cassandra.query.Statement.routing_key">
<code class="descname">routing_key</code><a class="headerlink" href="#cassandra.query.Statement.routing_key" title="Permalink to this definition">¶</a></dt>
<dd><p>The <code class="xref py py-attr docutils literal"><span class="pre">partition_key</span></code> portion of the primary key,
which can be used to determine which nodes are replicas for the query.</p>
<p>If the partition key is a composite, a list or tuple must be passed in.
Each key component should be in its packed (binary) format, so all
components should be strings.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.query.Statement.serial_consistency_level">
<code class="descname">serial_consistency_level</code><a class="headerlink" href="#cassandra.query.Statement.serial_consistency_level" title="Permalink to this definition">¶</a></dt>
<dd><p>The serial consistency level is only used by conditional updates
(<code class="docutils literal"><span class="pre">INSERT</span></code>, <code class="docutils literal"><span class="pre">UPDATE</span></code> and <code class="docutils literal"><span class="pre">DELETE</span></code> with an <code class="docutils literal"><span class="pre">IF</span></code> condition).  For
those, the <code class="docutils literal"><span class="pre">serial_consistency_level</span></code> defines the consistency level of
the serial phase (or &#8220;paxos&#8221; phase) while the normal
<code class="xref py py-attr docutils literal"><span class="pre">consistency_level</span></code> defines the consistency for the &#8220;learn&#8221; phase,
i.e. what type of reads will be guaranteed to see the update right away.
For example, if a conditional write has a <code class="xref py py-attr docutils literal"><span class="pre">consistency_level</span></code> of
<a class="reference internal" href="../cassandra.html#cassandra.ConsistencyLevel.QUORUM" title="cassandra.ConsistencyLevel.QUORUM"><code class="xref py py-attr docutils literal"><span class="pre">QUORUM</span></code></a> (and is successful), then a
<a class="reference internal" href="../cassandra.html#cassandra.ConsistencyLevel.QUORUM" title="cassandra.ConsistencyLevel.QUORUM"><code class="xref py py-attr docutils literal"><span class="pre">QUORUM</span></code></a> read is guaranteed to see that write.
But if the regular <code class="xref py py-attr docutils literal"><span class="pre">consistency_level</span></code> of that write is
<a class="reference internal" href="../cassandra.html#cassandra.ConsistencyLevel.ANY" title="cassandra.ConsistencyLevel.ANY"><code class="xref py py-attr docutils literal"><span class="pre">ANY</span></code></a>, then only a read with a
<code class="xref py py-attr docutils literal"><span class="pre">consistency_level</span></code> of <a class="reference internal" href="../cassandra.html#cassandra.ConsistencyLevel.SERIAL" title="cassandra.ConsistencyLevel.SERIAL"><code class="xref py py-attr docutils literal"><span class="pre">SERIAL</span></code></a> is
guaranteed to see it (even a read with consistency
<a class="reference internal" href="../cassandra.html#cassandra.ConsistencyLevel.ALL" title="cassandra.ConsistencyLevel.ALL"><code class="xref py py-attr docutils literal"><span class="pre">ALL</span></code></a> is not guaranteed to be enough).</p>
<p>The serial consistency can only be one of <a class="reference internal" href="../cassandra.html#cassandra.ConsistencyLevel.SERIAL" title="cassandra.ConsistencyLevel.SERIAL"><code class="xref py py-attr docutils literal"><span class="pre">SERIAL</span></code></a>
or <a class="reference internal" href="../cassandra.html#cassandra.ConsistencyLevel.LOCAL_SERIAL" title="cassandra.ConsistencyLevel.LOCAL_SERIAL"><code class="xref py py-attr docutils literal"><span class="pre">LOCAL_SERIAL</span></code></a>. While <code class="docutils literal"><span class="pre">SERIAL</span></code> guarantees full
linearizability (with other <code class="docutils literal"><span class="pre">SERIAL</span></code> updates), <code class="docutils literal"><span class="pre">LOCAL_SERIAL</span></code> only
guarantees it in the local data center.</p>
<p>The serial consistency level is ignored for any query that is not a
conditional update. Serial reads should use the regular
<code class="xref py py-attr docutils literal"><span class="pre">consistency_level</span></code>.</p>
<p>Serial consistency levels may only be used against Cassandra 2.0+
and the <a class="reference internal" href="cluster.html#cassandra.cluster.Cluster.protocol_version" title="cassandra.cluster.Cluster.protocol_version"><code class="xref py py-attr docutils literal"><span class="pre">protocol_version</span></code></a> must be set to 2 or higher.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cassandra.query.SimpleStatement">
<em class="property">class </em><code class="descclassname">cassandra.query.</code><code class="descname">SimpleStatement</code><a class="headerlink" href="#cassandra.query.SimpleStatement" title="Permalink to this definition">¶</a></dt>
<dd><p>A simple, un-prepared query.</p>
<p><cite>query_string</cite> should be a literal CQL statement with the exception
of parameter placeholders that will be filled through the
<cite>parameters</cite> argument of <a class="reference internal" href="cluster.html#cassandra.cluster.Session.execute" title="cassandra.cluster.Session.execute"><code class="xref py py-meth docutils literal"><span class="pre">Session.execute()</span></code></a>.</p>
<p>All arguments to <a class="reference internal" href="#cassandra.query.Statement" title="cassandra.query.Statement"><code class="xref py py-class docutils literal"><span class="pre">Statement</span></code></a> apply to this class as well</p>
</dd></dl>

<dl class="class">
<dt id="cassandra.query.PreparedStatement">
<em class="property">class </em><code class="descclassname">cassandra.query.</code><code class="descname">PreparedStatement</code><a class="headerlink" href="#cassandra.query.PreparedStatement" title="Permalink to this definition">¶</a></dt>
<dd><p>A statement that has been prepared against at least one Cassandra node.
Instances of this class should not be created directly, but through
<a class="reference internal" href="cluster.html#cassandra.cluster.Session.prepare" title="cassandra.cluster.Session.prepare"><code class="xref py py-meth docutils literal"><span class="pre">Session.prepare()</span></code></a>.</p>
<p>A <a class="reference internal" href="#cassandra.query.PreparedStatement" title="cassandra.query.PreparedStatement"><code class="xref py py-class docutils literal"><span class="pre">PreparedStatement</span></code></a> should be prepared only once. Re-preparing a statement
may affect performance (as the operation requires a network roundtrip).</p>
<dl class="method">
<dt id="cassandra.query.PreparedStatement.bind">
<code class="descname">bind</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cassandra.query.PreparedStatement.bind" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates and returns a <a class="reference internal" href="#cassandra.query.BoundStatement" title="cassandra.query.BoundStatement"><code class="xref py py-class docutils literal"><span class="pre">BoundStatement</span></code></a> instance using <cite>values</cite>.</p>
<p>See <a class="reference internal" href="#cassandra.query.BoundStatement.bind" title="cassandra.query.BoundStatement.bind"><code class="xref py py-meth docutils literal"><span class="pre">BoundStatement.bind()</span></code></a> for rules on input <code class="docutils literal"><span class="pre">values</span></code>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cassandra.query.BoundStatement">
<em class="property">class </em><code class="descclassname">cassandra.query.</code><code class="descname">BoundStatement</code><a class="headerlink" href="#cassandra.query.BoundStatement" title="Permalink to this definition">¶</a></dt>
<dd><p>A prepared statement that has been bound to a particular set of values.
These may be created directly or through <a class="reference internal" href="#cassandra.query.PreparedStatement.bind" title="cassandra.query.PreparedStatement.bind"><code class="xref py py-meth docutils literal"><span class="pre">PreparedStatement.bind()</span></code></a>.</p>
<p><cite>prepared_statement</cite> should be an instance of <a class="reference internal" href="#cassandra.query.PreparedStatement" title="cassandra.query.PreparedStatement"><code class="xref py py-class docutils literal"><span class="pre">PreparedStatement</span></code></a>.</p>
<p>All arguments to <a class="reference internal" href="#cassandra.query.Statement" title="cassandra.query.Statement"><code class="xref py py-class docutils literal"><span class="pre">Statement</span></code></a> apply to this class as well</p>
<dl class="method">
<dt id="cassandra.query.BoundStatement.bind">
<code class="descname">bind</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cassandra.query.BoundStatement.bind" title="Permalink to this definition">¶</a></dt>
<dd><p>Binds a sequence of values for the prepared statement parameters
and returns this instance.  Note that <cite>values</cite> <em>must</em> be:</p>
<ul class="simple">
<li>a sequence, even if you are only binding one value, or</li>
<li>a dict that relates 1-to-1 between dict keys and columns</li>
</ul>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.6.0: </span><a class="reference internal" href="#cassandra.query.UNSET_VALUE" title="cassandra.query.UNSET_VALUE"><code class="xref py py-data docutils literal"><span class="pre">UNSET_VALUE</span></code></a> was introduced. These can be bound as positional parameters
in a sequence, or by name in a dict. Additionally, when using protocol v4+:</p>
<ul class="simple">
<li>short sequences will be extended to match bind parameters with UNSET_VALUE</li>
<li>names may be omitted from a dict with UNSET_VALUE implied.</li>
</ul>
</div>
</dd></dl>

</dd></dl>

<dl class="data">
<dt id="cassandra.query.UNSET_VALUE">
<code class="descclassname">cassandra.query.</code><code class="descname">UNSET_VALUE</code><a class="headerlink" href="#cassandra.query.UNSET_VALUE" title="Permalink to this definition">¶</a></dt>
<dd><p>The most base type</p>
</dd></dl>

<dl class="class">
<dt id="cassandra.query.BatchStatement">
<em class="property">class </em><code class="descclassname">cassandra.query.</code><code class="descname">BatchStatement</code><span class="sig-paren">(</span><em>batch_type=BatchType.LOGGED</em>, <em>retry_policy=None</em>, <em>consistency_level=None</em><span class="sig-paren">)</span><a class="headerlink" href="#cassandra.query.BatchStatement" title="Permalink to this definition">¶</a></dt>
<dd><p>A protocol-level batch of operations which are applied atomically
by default.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.0.</span></p>
</div>
<p><cite>batch_type</cite> specifies The <a class="reference internal" href="#cassandra.query.BatchType" title="cassandra.query.BatchType"><code class="xref py py-class docutils literal"><span class="pre">BatchType</span></code></a> for the batch operation.
Defaults to <a class="reference internal" href="#cassandra.query.BatchType.LOGGED" title="cassandra.query.BatchType.LOGGED"><code class="xref py py-attr docutils literal"><span class="pre">BatchType.LOGGED</span></code></a>.</p>
<p><cite>retry_policy</cite> should be a <a class="reference internal" href="policies.html#cassandra.policies.RetryPolicy" title="cassandra.policies.RetryPolicy"><code class="xref py py-class docutils literal"><span class="pre">RetryPolicy</span></code></a> instance for
controlling retries on the operation.</p>
<p><cite>consistency_level</cite> should be a <a class="reference internal" href="../cassandra.html#cassandra.ConsistencyLevel" title="cassandra.ConsistencyLevel"><code class="xref py py-class docutils literal"><span class="pre">ConsistencyLevel</span></code></a> value
to be used for all operations in the batch.</p>
<p><cite>custom_payload</cite> is a <a class="reference internal" href="protocol.html#custom-payload"><span>Custom Payloads</span></a> passed to the server.
Note: as Statement objects are added to the batch, this map is
updated with any values found in their custom payloads. These are
only allowed when using protocol version 4 or higher.</p>
<p>Example usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">insert_user</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="s">&quot;INSERT INTO users (name, age) VALUES (?, ?)&quot;</span><span class="p">)</span>
<span class="n">batch</span> <span class="o">=</span> <span class="n">BatchStatement</span><span class="p">(</span><span class="n">consistency_level</span><span class="o">=</span><span class="n">ConsistencyLevel</span><span class="o">.</span><span class="n">QUORUM</span><span class="p">)</span>

<span class="k">for</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">)</span> <span class="ow">in</span> <span class="n">users_to_insert</span><span class="p">:</span>
    <span class="n">batch</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">insert_user</span><span class="p">,</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">))</span>

<span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">batch</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also mix different types of operations within a batch:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">batch</span> <span class="o">=</span> <span class="n">BatchStatement</span><span class="p">()</span>
<span class="n">batch</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">SimpleStatement</span><span class="p">(</span><span class="s">&quot;INSERT INTO users (name, age) VALUES (</span><span class="si">%s</span><span class="s">, </span><span class="si">%s</span><span class="s">)&quot;</span><span class="p">),</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">))</span>
<span class="n">batch</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">SimpleStatement</span><span class="p">(</span><span class="s">&quot;DELETE FROM pending_users WHERE name=</span><span class="si">%s</span><span class="s">&quot;</span><span class="p">),</span> <span class="p">(</span><span class="n">name</span><span class="p">,))</span>
<span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">batch</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.0.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.1.0: </span>Added <cite>serial_consistency_level</cite> as a parameter</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.6.0: </span>Added <cite>custom_payload</cite> as a parameter</p>
</div>
<dl class="method">
<dt id="cassandra.query.BatchStatement.add">
<code class="descname">add</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cassandra.query.BatchStatement.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a <a class="reference internal" href="#cassandra.query.Statement" title="cassandra.query.Statement"><code class="xref py py-class docutils literal"><span class="pre">Statement</span></code></a> and optional sequence of parameters
to be used with the statement to the batch.</p>
<p>Like with other statements, parameters must be a sequence, even
if there is only one item.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.query.BatchStatement.add_all">
<code class="descname">add_all</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cassandra.query.BatchStatement.add_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a sequence of <a class="reference internal" href="#cassandra.query.Statement" title="cassandra.query.Statement"><code class="xref py py-class docutils literal"><span class="pre">Statement</span></code></a> objects and a matching sequence
of parameters to the batch.  <code class="xref py py-const docutils literal"><span class="pre">None</span></code> can be used in place of
parameters when no parameters are needed.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cassandra.query.BatchType">
<em class="property">class </em><code class="descclassname">cassandra.query.</code><code class="descname">BatchType</code><a class="headerlink" href="#cassandra.query.BatchType" title="Permalink to this definition">¶</a></dt>
<dd><p>A BatchType is used with <a class="reference internal" href="#cassandra.query.BatchStatement" title="cassandra.query.BatchStatement"><code class="xref py py-class docutils literal"><span class="pre">BatchStatement</span></code></a> instances to control
the atomicity of the batch operation.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.0.</span></p>
</div>
<dl class="attribute">
<dt id="cassandra.query.BatchType.LOGGED">
<code class="descname">LOGGED</code><em class="property"> = BatchType.LOGGED</em><a class="headerlink" href="#cassandra.query.BatchType.LOGGED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="cassandra.query.BatchType.UNLOGGED">
<code class="descname">UNLOGGED</code><em class="property"> = BatchType.UNLOGGED</em><a class="headerlink" href="#cassandra.query.BatchType.UNLOGGED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="cassandra.query.BatchType.COUNTER">
<code class="descname">COUNTER</code><em class="property"> = BatchType.COUNTER</em><a class="headerlink" href="#cassandra.query.BatchType.COUNTER" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="cassandra.query.ValueSequence">
<em class="property">class </em><code class="descclassname">cassandra.query.</code><code class="descname">ValueSequence</code><a class="reference internal" href="../../_modules/cassandra/encoder.html#ValueSequence"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.query.ValueSequence" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper class that is used to specify that a sequence of values should
be treated as a CQL list of values instead of a single column collection when used
as part of the <cite>parameters</cite> argument for <a class="reference internal" href="cluster.html#cassandra.cluster.Session.execute" title="cassandra.cluster.Session.execute"><code class="xref py py-meth docutils literal"><span class="pre">Session.execute()</span></code></a>.</p>
<p>This is typically needed when supplying a list of keys to select.
For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">my_user_ids</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;alice&#39;</span><span class="p">,</span> <span class="s">&#39;bob&#39;</span><span class="p">,</span> <span class="s">&#39;charles&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span> <span class="o">=</span> <span class="s">&quot;SELECT * FROM users WHERE user_id IN </span><span class="si">%s</span><span class="s">&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="n">ValueSequence</span><span class="p">(</span><span class="n">my_user_ids</span><span class="p">)])</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="cassandra.query.QueryTrace">
<em class="property">class </em><code class="descclassname">cassandra.query.</code><code class="descname">QueryTrace</code><a class="headerlink" href="#cassandra.query.QueryTrace" title="Permalink to this definition">¶</a></dt>
<dd><p>A trace of the duration and events that occurred when executing
an operation.</p>
<dl class="method">
<dt id="cassandra.query.QueryTrace.populate">
<code class="descname">populate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cassandra.query.QueryTrace.populate" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves the actual tracing details from Cassandra and populates the
attributes of this instance.  Because tracing details are stored
asynchronously by Cassandra, this may need to retry the session
detail fetch.  If the trace is still not available after <cite>max_wait</cite>
seconds, <a class="reference internal" href="#cassandra.query.TraceUnavailable" title="cassandra.query.TraceUnavailable"><code class="xref py py-exc docutils literal"><span class="pre">TraceUnavailable</span></code></a> will be raised; if <cite>max_wait</cite> is
<code class="xref py py-const docutils literal"><span class="pre">None</span></code>, this will retry forever.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cassandra.query.TraceEvent">
<em class="property">class </em><code class="descclassname">cassandra.query.</code><code class="descname">TraceEvent</code><a class="headerlink" href="#cassandra.query.TraceEvent" title="Permalink to this definition">¶</a></dt>
<dd><p>Representation of a single event within a query trace.</p>
</dd></dl>

<dl class="exception">
<dt id="cassandra.query.TraceUnavailable">
<em class="property">exception </em><code class="descclassname">cassandra.query.</code><code class="descname">TraceUnavailable</code><a class="headerlink" href="#cassandra.query.TraceUnavailable" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when complete trace details cannot be fetched from Cassandra.</p>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pool.html" title="cassandra.pool - Hosts and Connection Pools"
             >next</a> |</li>
        <li class="right" >
          <a href="metrics.html" title="cassandra.metrics - Performance Metrics"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Cassandra Driver 2.7.2 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >API Documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2014, DataStax.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>